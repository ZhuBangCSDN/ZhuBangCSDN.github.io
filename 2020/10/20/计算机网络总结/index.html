<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    

    <title>
      计算机网络总结 | Blog of Alaga 
    </title>

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    
      <meta name="author" content="朱邦政">
    
    

    <meta name="description" content="计算机网络的知识浩瀚如海，迫于时间没能够一本一本细读，只在有需要的时候才翻阅查找，现做个笔记总结一下常见的知识 TCP&#x2F;IP 协议结构 TCP&#x2F;IP 为分为四层协议，从顶层到底层分别为： 应用层： Http（超文本传输协议） DNS（域名系统） Telnet（远程登陆协议） FTP（文件传输协议） TFTP（简单文件传输协议） SMTP（简单邮件传输协议） SNTP（简单网络时间协议）   传输层">
<meta property="og:type" content="article">
<meta property="og:title" content="计算机网络总结 | Blog of Alaga">
<meta property="og:url" content="http://yoursite.com/2020/10/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%80%BB%E7%BB%93/index.html">
<meta property="og:site_name" content="Blog of Alaga">
<meta property="og:description" content="计算机网络的知识浩瀚如海，迫于时间没能够一本一本细读，只在有需要的时候才翻阅查找，现做个笔记总结一下常见的知识 TCP&#x2F;IP 协议结构 TCP&#x2F;IP 为分为四层协议，从顶层到底层分别为： 应用层： Http（超文本传输协议） DNS（域名系统） Telnet（远程登陆协议） FTP（文件传输协议） TFTP（简单文件传输协议） SMTP（简单邮件传输协议） SNTP（简单网络时间协议）   传输层">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2020-10-20T04:44:46.000Z">
<meta property="article:modified_time" content="2020-10-24T04:46:38.586Z">
<meta property="article:author" content="朱邦政">
<meta property="article:tag" content="面试">
<meta property="article:tag" content="基础">
<meta property="article:tag" content="网络">
<meta name="twitter:card" content="summary">
    
    
    
      <link rel="icon" type="image/x-icon" href="/favicon.png">
    
    
<link rel="stylesheet" href="/css/uno.css">

    
<link rel="stylesheet" href="/css/highlight.css">

    
<link rel="stylesheet" href="/css/archive.css">

    
<link rel="stylesheet" href="/css/china-social-icon.css">


<meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="Blog of Alaga" type="application/atom+xml">
</head>
<body>

    <span class="mobile btn-mobile-menu">
        <i class="icon icon-list btn-mobile-menu__icon"></i>
        <i class="icon icon-x-circle btn-mobile-close__icon hidden"></i>
    </span>

    

<header class="panel-cover panel-cover--collapsed">


  <div class="panel-main">

  
    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        

        <h1 class="panel-cover__title panel-title"><a href="/" title="link to homepage">Blog of Alaga</a></h1>
        <hr class="panel-cover__divider" />

        

        <div class="navigation-wrapper">

          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">

              
                
                <li class="navigation__item"><a href="/#blog" title="" class="blog-button">首页</a></li>
              
                
                <li class="navigation__item"><a href="/about" title="" class="">关于</a></li>
              
                
                <li class="navigation__item"><a href="/archive" title="" class="">归档</a></li>
              

            </ul>
          </nav>

          <!-- ----------------------------
To add a new social icon simply duplicate one of the list items from below
and change the class in the <i> tag to match the desired social network
and then add your link to the <a>. Here is a full list of social network
classes that you can use:

    icon-social-500px
    icon-social-behance
    icon-social-delicious
    icon-social-designer-news
    icon-social-deviant-art
    icon-social-digg
    icon-social-dribbble
    icon-social-facebook
    icon-social-flickr
    icon-social-forrst
    icon-social-foursquare
    icon-social-github
    icon-social-google-plus
    icon-social-hi5
    icon-social-instagram
    icon-social-lastfm
    icon-social-linkedin
    icon-social-medium
    icon-social-myspace
    icon-social-path
    icon-social-pinterest
    icon-social-rdio
    icon-social-reddit
    icon-social-skype
    icon-social-spotify
    icon-social-stack-overflow
    icon-social-steam
    icon-social-stumbleupon
    icon-social-treehouse
    icon-social-tumblr
    icon-social-twitter
    icon-social-vimeo
    icon-social-xbox
    icon-social-yelp
    icon-social-youtube
    icon-social-zerply
    icon-mail

-------------------------------->

<!-- add social info here -->




        </div>

      </div>

    </div>

    <div class="panel-cover--overlay"></div>
  </div>
</header>

    <div class="content-wrapper">
        <div class="content-wrapper__inner entry">
            

<article class="post-container post-container--single">

  <header class="post-header">
    
    <h1 class="post-title">计算机网络总结</h1>

    

    <div class="post-meta">
      <time datetime="2020-10-20" class="post-meta__date date">2020-10-20</time> 

      <span class="post-meta__tags tags">

          
            <font class="categories">
            &#8226; 分类:
            <a class="categories-link" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a>
            </font>
          

          
             &#8226; 标签:
            <font class="tags">
              <a class="tags-link" href="/tags/%E5%9F%BA%E7%A1%80/" rel="tag">基础</a>, <a class="tags-link" href="/tags/%E7%BD%91%E7%BB%9C/" rel="tag">网络</a>, <a class="tags-link" href="/tags/%E9%9D%A2%E8%AF%95/" rel="tag">面试</a>
            </font>
          

      </span>
    </div>
    
    

  </header>

  <section id="post-content" class="article-content post">
    <p><em>计算机网络的知识浩瀚如海，迫于时间没能够一本一本细读，只在有需要的时候才翻阅查找，现做个笔记总结一下常见的知识</em></p>
<h2 id="TCP-IP-协议结构"><a href="#TCP-IP-协议结构" class="headerlink" title="TCP/IP 协议结构"></a><strong>TCP/IP 协议结构</strong></h2><ul>
<li>TCP/IP 为分为四层协议，从顶层到底层分别为：<ul>
<li>应用层：<ul>
<li>Http（超文本传输协议）</li>
<li>DNS（域名系统）</li>
<li>Telnet（远程登陆协议）</li>
<li>FTP（文件传输协议）</li>
<li>TFTP（简单文件传输协议）</li>
<li>SMTP（简单邮件传输协议）</li>
<li>SNTP（简单网络时间协议）</li>
</ul>
</li>
<li>传输层<ul>
<li>TCP（传输控制协议）</li>
<li>UDP（用户数据报协议）</li>
</ul>
</li>
<li>网络层<ul>
<li>IP（IPv4、IPv6）</li>
<li>ICMP（Internet 控制报文协议）</li>
<li>RIP（路由信息协议）</li>
<li>ARP（地址解析协议）</li>
<li>RARP（逆向地址解析协议）</li>
</ul>
</li>
<li>网络接口层<ul>
<li>Ethernet（以太网）</li>
<li>IEEE 802.3</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<p><strong>接下来会自顶向下介绍，可能会有缺漏，但尽可能完善</strong></p>
<h2 id="应用层"><a href="#应用层" class="headerlink" title="应用层"></a>应用层</h2><h3 id="Http"><a href="#Http" class="headerlink" title="Http"></a>Http</h3><ul>
<li>Http 是超文本传输协议，基于 TCP 传输。有时也基于 TLS/SSL，那就是 Https。<ul>
<li><strong>Http 连接的过程（浏览器输入 url 之后的过程）</strong><br>1、DNS 解析找到域名对应的 IP 地址<br>2、TCP 三次握手建立连接<br>3、客户端发送 Http 请求<br>4、服务端处理请求并返回响应报文。<br>5、客户端处理报文，浏览器解析并渲染页面，连接结束。</li>
</ul>
</li>
<li><strong>Http 结构</strong>：<ul>
<li><strong>Http 请求结构</strong>：<br>请求行：请求方法 URL 协议版本<br>请求头：头部字段名 值<br>空行<br>请求数据</li>
<li><strong>Http 响应结构</strong>：<br>状态行<br>消息报头<br>空行<br>响应正文</li>
</ul>
</li>
</ul>
<h3 id="DNS-解析"><a href="#DNS-解析" class="headerlink" title="DNS 解析"></a>DNS 解析</h3><ul>
<li>DNS 解析又叫域名解析，分为递归和迭代两种，通常我们见到的是递归和迭代复合使用的方式。过程如下：<br>比如我们输入“<a href="http://www.baidu.com”" target="_blank" rel="noopener">www.baidu.com”</a><br>1、浏览器输入一个 url 之后，先在自身的缓存中查询有没有被解析过的域名对应的 ip 地址，如果有就返回。<br>2、如果浏览器没有命中，就会到本地操作系统的缓存中查询，在 C 盘的 hosts 文件中，如果有就返回。<br>3、如果本地缓存也没有命中，就会像本地域名解析系统（LDNS）发出请求，如果解析成功就返回。<br>4、如果 LDNS 没有命中，则向根服务器（Root Server）发出请求，Root Server 会返回一个顶级域名服务器的地址。（如 com）<br>5、LDNS 收到以后向这个顶级域名服务器继续发出请求，顶级域名服务器收到以后解析，并返回二级域名服务器（Name Server）地址（如 baidu）<br>6、LDNS 缓存这个域名和对应的 ip，并把结果返回给浏览器，浏览器和操作系统都保存在缓存中，解析结束。</li>
</ul>
<p>上面这个过程包括了递归和迭代，递归和迭代的区别在于查询的递交者是否改变，递归改变，迭代不变。所以可以看到 1-3 的步骤中是递归查询，4-6 的步骤是迭代查询。当然 DNS 解析也有纯递归和纯迭代，效率可能就没有这种组合的方式高，所以我就不举例了。</p>
<h3 id="DNS-用的是-TCP-还是-UDP"><a href="#DNS-用的是-TCP-还是-UDP" class="headerlink" title="DNS 用的是 TCP 还是 UDP"></a>DNS 用的是 TCP 还是 UDP</h3><ul>
<li><p>在域名解析的时候使用的是 UDP 协议，在区域传输的时候用的是 TCP 协议。<br>域名解析：<br>1、因为 TCP 是面向连接的协议，如果 DNS 使用 TCP，那么每次 DNS 交易都要加上 TCP 三次握手的时间，倘若我们访问一个冷门的网站，LDNS 迭代查询多少个服务器就要多花多少个三次握手的时间。所以我们选择了使用 UDP。<br>2、当然，UDP 也有缺点，由于历史的原因，互联网物理链路上的的最小 MTU 为 576，基于 UDP 传输的 DNS 为了限制报文不超过 576，把 DNS 报文限制在了 512 字节。<strong>如果我们传输超过 512 字节的报文（例如 1000 个字节），UDP 就会截断成 512 字节，后面的 488 字节会被丢弃</strong>。原因是 DNS 没有字段来识别报文 ID，默认只有一个报文，所以多出来的只能被抛弃，所幸的是域名解析传输的报文很小，一般不会超过。<br>当然，由于 UDP 只能传输 512 字节无法携带证书，这就带来了不安全性，我们常见的<strong>DNS 劫持</strong>就是因此产生，DNS 劫持就是攻击 DNS，或者是伪造 DNS 服务器，给客户端返回错误的 ip 地址。<br>3、当然，用上 TCP 就可以安全一点，因为 TCP 可以携带大量的数据，你可以放进签名和证书，就能保证相对的安全，只不过又要考虑上面说到的时间损耗。目前国际上应该用的是 UDP 比较多，DNS 劫持的问题交给服务端和客户端去处理。</p>
<p>区域传输：<br>1、DNS 的规范规定了 2 种类型的 DNS 服务器，一个叫主 DNS 服务器，一个叫辅助 DNS 服务器。在一个区中主 DNS 服务器从自己本机的数据文件中读取该区的 DNS 数据信息，而辅助 DNS 服务器则从区的主 DNS 服务器中读取该区的 DNS 数据信息。（有点类似于数据库的主从复制）当一个辅助 DNS 服务器启动时，它需要与主 DNS 服务器通信，并加载数据信息，这就叫做区域传输（zone transfer）。<br>2、而由于以下原因，区域传输选择了使用 TCP：</p>
<ul>
<li>辅域名服务器会定时（一般时 3 小时）向主域名服务器进行查询以便了解数据是否有变动。如有变动，则会执行一次区域传送，进行数据同步。因为数据同步传送的数据量比一个请求和应答的数据量要多得多，因此使用的是 TCP 而不是 UDP。</li>
<li>TCP 是一种可靠的连接，保证了数据的准确性。</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li>最后简单介绍一下 DNS 劫持和 Http 劫持，简单的来说 DNS 劫持就是你输入了 google 的 url，结果浏览器弹出来了百度的页面。而 Http 劫持则是你在笔趣阁看更新的小说，结果右下角一直弹出澳门皇家赌场的广告。<br>DNS 劫持预防：<br>1、如果是个人的话倒是没有预防的必要了（劫持一般面向大型网站，无差别攻击，大家都一样，一般不会特意针对你）。如果被劫持了，可以手动修改 DNS 地址，也可以修改路由器密码。<br>2、如果是公司的话就有必要了，一是可以做个网站监控工具，时刻监控域名有没有被劫持。二是准备多个备用域名，如果首选域名被劫持就换上备用的。三是找网安专家。</li>
</ul>
<h2 id="传输层"><a href="#传输层" class="headerlink" title="传输层"></a>传输层</h2><h3 id="TCP"><a href="#TCP" class="headerlink" title="TCP"></a>TCP</h3><ul>
<li>TCP 又称传输控制协议，是面向连接的协议。首先我们可能经常在网上看到，TCP 头部有 20 个字节，UDP 头部有 8 个字节，但是一直不清楚怎么来的，TCP 头部那张图也很复杂看不懂，接下来我就解释一下，TCP 头部从上到下依次为。<ul>
<li>16 位源端口号，16 位目的端口号。（换算方式是 8 位一个字节，所以也可以说是 2 个字节的源端口号和 2 个字节的目的端口号，这里就是 4 个字节，下面不再赘述。）</li>
<li>32 位序号/4 个字节</li>
<li>32 位确认序号/4 个字节</li>
<li>4 位头部长度+6 位保留+6 位标志位，16 位窗口大小。/4 个字节</li>
<li>16 位校验和，16 位紧急指针。/4 个字节。<br>以上全部加起来就是 20 个字节。</li>
<li>最后还有一个，选项 option，长度可变，最长可达 4 个字节，通常不启用的情况下，TCP 头部就是 20 个字节。</li>
</ul>
</li>
</ul>
<h3 id="UDP"><a href="#UDP" class="headerlink" title="UDP"></a>UDP</h3><ul>
<li>UDP 又称用户数据包协议，是无连接的协议，尽最大努力交付，但不保证可靠。UDP 头部的 8 个字节从上到下依次为：<ul>
<li>16 位源端口号，16 位目的端口号。/4 个字节</li>
<li>16 位 UDP 长度，16 位校验和。/4 个字节。</li>
<li>这里需要一提的是，在计算校验和的时候，我们会在 UDP 头部再加上一截 12 字节长度的伪首部，这个伪首部仅是用来辅助计算校验和的，不会向下或者向上递交，所以我们传输的时候看到的还是 8 个字节。</li>
</ul>
</li>
</ul>
<h3 id="TCP-和-UDP-的区别"><a href="#TCP-和-UDP-的区别" class="headerlink" title="TCP 和 UDP 的区别"></a>TCP 和 UDP 的区别</h3><p>1、TCP 是面向连接的可靠传输，UDP 是无连接的传输不保证可靠交付。<br>2、TCP 通常是用在文件传输，网络会话，发送接收邮件这些地方，UDP 用在语音，视频还有直播这些地方。<br>3、然后 TCP 只支持一对一的连接，UDP 就没那么多限制，一对一，一对多，多对多都可以。<br>4、UDP 分组首部开销比较小，只要八个字节，TCP 要二十个字节。<br>5、就是 TCP 是面向字节流的，它是把一连串数据转成字节流进行传输，而 UDP 是面向报文的，报文是它的最小分割单位。</p>
<p>-</p>
<h2 id="网络层"><a href="#网络层" class="headerlink" title="网络层"></a>网络层</h2><h2 id="网络接口层"><a href="#网络接口层" class="headerlink" title="网络接口层"></a>网络接口层</h2>
  </section>

  <section class="post-comments">
  <!-- 将评论系统（例如Disqus、多说、友言、畅言等）提供的代码片段粘贴在这里 -->
</section>



</article>


            <footer class="footer">

    <span class="footer__copyright">&copy; 2014-2015. | 由<a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>强力驱动 | 主题<a href="https://github.com/someus/huno" target="_blank" rel="noopener">Huno</a></span>
    
</footer>
        </div>
    </div>

    <!-- js files -->
    <script src="/js/jquery.min.js"></script>
    <script src="/js/main.js"></script>
    <script src="/js/scale.fix.js"></script>
    

    

    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript"> 
        $(document).ready(function(){
            MathJax.Hub.Config({ 
                tex2jax: {inlineMath: [['[latex]','[/latex]'], ['\\(','\\)']]} 
            });
        });
    </script>


    

    <script src="/js/jquery.min.js"></script>
    <script src="/js/awesome-toc.min.js"></script>
    <script>
        $(document).ready(function(){
            $.awesome_toc({
                overlay: true,
                contentId: "post-content",
            });
        });
    </script>


    
    
    <!--kill ie6 -->
<!--[if IE 6]>
  <script src="//letskillie6.googlecode.com/svn/trunk/2/zh_CN.js"></script>
<![endif]-->

</body>
</html>
